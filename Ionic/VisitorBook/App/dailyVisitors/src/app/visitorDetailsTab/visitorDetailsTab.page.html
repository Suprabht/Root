<ion-header [translucent]="true">
  <ion-toolbar color="success">
    <ion-buttons>
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Visitor Entry
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup] ="form">
    <div class="leftContent">
      <ion-card>
        <ion-card-content>
            <IonContent>
              <!--Name:Start-->
              <ion-item >
                <ion-label color="primary" position ="floating">Visitors name</ion-label>
                <ion-input autocapitalize inputmode="text" required name="visitorName" formControlName="visitorName" ></ion-input>
              </ion-item>
              <div *ngFor="let error of errorMessages.visitorName">
                <ng-container *ngIf="visitorName.hasError(error.type) && (visitorName.dirty || visitorName.touched)">
                  <small class="error-message">{{error.message}}</small>
                </ng-container>
              </div>
              <!--Name:End-->
              <!--Email:Start-->
              <ion-item >
                <ion-label color="primary" position ="floating">Email</ion-label>
                <ion-input inputmode="email" type="email" name="visitorsName" formControlName ="email"></ion-input>
              </ion-item>
              <div *ngFor="let error of errorMessages.email">
                <ng-container *ngIf="email.hasError(error.type) && (email.dirty || email.touched)">
                <small class="error-message">{{error.message}}</small>
                </ng-container>
              </div>
              <!--Email:End-->
              <!--Mobile:Start-->
              <ion-item >
                <ion-label color="primary" position ="floating">Mobile Number</ion-label>
                <ion-input inputmode="tel" name="Mobile Number"  formControlName ="mobileNumber"></ion-input>
              </ion-item>
              <div *ngFor="let error of errorMessages.mobileNumber">
                <ng-container *ngIf="mobileNumber.hasError(error.type) && (mobileNumber.dirty || mobileNumber.touched)">
                <small class="error-message">{{error.message}}</small>
                </ng-container>
              </div>
              <!--Mobile:End-->
            </IonContent>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <Ioncontent>
            <!--Address:Start-->
            <ion-item>
              <ion-label color="primary" position ="floating">Address</ion-label>
              <ion-textarea autocapitalize inputmode="text"  name="Address" formControlName ="adress"></ion-textarea>
            </ion-item>
            <div *ngFor="let error of errorMessages.adress">
              <ng-container *ngIf="adress.hasError(error.type) && (adress.dirty || adress.touched)">
              <small class="error-message">{{error.message}}</small>
              </ng-container>
            </div>
            <!--Address:End-->
          </Ioncontent>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <Ioncontent>
            <!--From Place:Start-->
            <ion-item>
              <ion-label color="primary" position ="floating">From Place Name</ion-label>
              <ion-input autocapitalize inputmode="text"  name="FromPlace" formControlName ="fromPlace"></ion-input>
            </ion-item> 
            <div *ngFor="let error of errorMessages.fromPlace">
              <ng-container *ngIf="fromPlace.hasError(error.type) && (fromPlace.dirty || fromPlace.touched)">
              <small class="error-message">{{error.message}}</small>
              </ng-container>
            </div>
            <!--From Place:End-->
            <!--From Place:Start-->
            <ion-item>
              <ion-label color="primary" position ="floating">Company</ion-label>
              <ion-input autocapitalize inputmode="text"  name="Company" formControlName ="company"></ion-input>
            </ion-item> 
            <div *ngFor="let error of errorMessages.Company">
              <ng-container *ngIf="company.hasError(error.type) && (company.dirty || company.touched)">
              <small class="error-message">{{error.message}}</small>
              </ng-container>
            </div>
            <!--From Place:End-->
            <!--From Place:Start-->
            <ion-item>
              <ion-label color="primary" position ="floating">Person visiting in RWS</ion-label>
              <ion-input autocapitalize inputmode="text"  name="PersonVisitingInRWS" formControlName ="personVisitingInRWS"></ion-input>
            </ion-item> 
            <div *ngFor="let error of errorMessages.personVisitingInRWS">
              <ng-container *ngIf="personVisitingInRWS.hasError(error.type) && (personVisitingInRWS.dirty || personVisitingInRWS.touched)">
              <small class="error-message">{{error.message}}</small>
              </ng-container>
            </div>
            <!--From Place:End-->
          </Ioncontent>
        </ion-card-content>
      </ion-card>
    </div>
    <div class="rightContent">
      <ion-card>
        <ion-card-content>
          <Ioncontent>
            <!--Photo:Start-->
            <div class="photoDiv" (click)="opencamera()">
              <ion-item *ngFor="let photo of photos; index as position">
                  <ion-img src="{{ photo.webviewPath }}" (click)="opencamera()"
                    alt="Your Photo" alt="Missing image" onerror="this.onerror=null" this.src="../../assets/Camera.jpg">
                  </ion-img>
              </ion-item>
            </div>
            <ion-fab horizontal="end" vertical="center" slot="fixed">
              <ion-fab-button color="tertiary" (click)="opencamera()">
                  <ion-icon name="camera-outline"></ion-icon>
              </ion-fab-button>
             </ion-fab>
            <!--Photo:End-->
          </Ioncontent>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <Ioncontent>
            <!--Signature:Start-->
            <div class="signatureDiv">
              <img src="../../assets/signature.png" [hidden]="this.signatureMaskHidden" (mouseover)="hideImage()" (mousedown)="hideImage()" (click)="hideImage()">
              <ion-item>
                <signature-pad #signatureCanvas [options]="signaturePadOptions" id="signatureCanvas" (onBeginEvent)="drawStart()" (onEndEvent)="drawComplete()" >
                </signature-pad>
              </ion-item>
            </div>
            <ion-fab horizontal="end" vertical="center" slot="fixed">
              <ion-fab-button color="danger" [disabled]="!this.signatureImage" (click)="drawClear()">
                <ion-icon name="close-circle-outline"></ion-icon>
              </ion-fab-button>
             </ion-fab>
            <!--Signature:End-->
          </Ioncontent>
        </ion-card-content>
      </ion-card>
      <div class="buttons">
        <ion-button color="danger" (click)="drawClear(form)" >
          <ion-icon name="refresh-circle-outline"></ion-icon>
          &nbsp;&nbsp;Reset
        </ion-button><br/>
        <ion-button color="tertiary" type="submit" [disabled]="!form.valid" (click) ="onSubmit(form)" >
          <ion-icon name="save-outline"></ion-icon>
          &nbsp;&nbsp;Submit
        </ion-button>
      </div>
    </div>
    
  </form>
</ion-content>

