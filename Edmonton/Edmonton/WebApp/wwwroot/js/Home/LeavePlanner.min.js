LeavePlanner=function(){};LeavePlanner.prototype.init=function(){$.getJSON("/Home/LeaveCalendar/?t="+Math.random(),function(n){var t,i;$("#leave-calendar").zabuto_calendar({data:n.calendarDates});t=document.createElement("table");t.id="grid";$("#gridContainer").append(t);i=document.createElement("div");i.id="gridPager";$("#gridContainer").append(i);$.getJSON("/Home/Leave?t="+Math.random(),function(n){leavePlanner.loadGrid(n)})})};LeavePlanner.prototype.loadGrid=function(n){var t=$("#grid");t.jqGrid({colModel:[{label:"Leave Id",name:"leaveId",index:"leaveId",width:"110",editable:!1,editrules:{required:!0},key:!0,hidden:!0},{label:"Leave Date",name:"leaveDate",index:"leaveDate",width:"210",editable:!0,editrules:{required:!0},formatter:"date",formatoptions:{srcformat:"Y/m/d H:i",newformat:"d/m/Y"}}],pager:"#gridPager",regional:"en",datatype:"jsonstring",datastr:n,jsonReader:{repeatitems:!1},rowNum:n.records,viewrecords:!0,caption:"Leave",height:"auto",ignoreCase:!0});t.navGrid("#gridPager",{edit:!1,add:!0,del:!0,search:!1,refresh:!1,view:!1,position:"left",cloneToTop:!1},{url:"/Home/Leave",editCaption:"The Edit Dialog",recreateForm:!0,checkOnUpdate:!1,checkOnSubmit:!1,closeAfterEdit:!0,reloadAfterSubmit:!0,mtype:"POST",modal:!0,jqModal:!0,serializeEditData:function(n){return{programId:parseInt(n.id),programName:n.programName,programDescription:n.programDescription}},afterSubmit:function(){return leavePlanner.unLoadGrid(),leavePlanner.init(),!0},errorTextFormat:function(n){return"Error: "+n.responseText}},{url:"/Home/Leave",closeAfterAdd:!0,recreateForm:!0,mtype:"PUT",checkOnUpdate:!1,checkOnSubmit:!1,closeAfterAdd:!0,clearAfterAdd:!0,reloadAfterSubmit:!1,afterSubmit:function(){return leavePlanner.unLoadGrid(),leavePlanner.init(),$(".ui-icon-closethick").trigger("click"),!0},errorTextFormat:function(n){return"Error: "+n.responseText}},{url:"/Home/Leave",mtype:"DELETE",editCaption:"The Edit Dialog",recreateForm:!0,checkOnUpdate:!1,checkOnSubmit:!1,closeAfterDelete:!0,reloadAfterSubmit:!0,modal:!0,jqModal:!0,afterSubmit:function(){return leavePlanner.unLoadGrid(),leavePlanner.init(),$(".ui-icon-closethick").trigger("click"),!0},errorTextFormat:function(n){return"Error: "+n.responseText}})};LeavePlanner.prototype.unLoadGrid=function(){$("#grid").jqGrid("clearGridData");$("#grid").remove();$("#gridPager").remove();$("#gridContainer").empty()};var leavePlanner=new LeavePlanner;leavePlanner.init();